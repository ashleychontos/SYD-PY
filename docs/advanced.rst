.. _advanced:
.. role:: bash(code)
   :language: bash

Advanced Usage
#################

=======

Below are examples of how to use specific ``pySYD`` features, as well as plots showing results before and after their usage.


``--dnu: force dnu``
++++++++

+-------------------------------------------------+---------------------------------------------------------+
| Before                                          | After                                                   |
+=================================================+=========================================================+
| Force the dnu value if the wrong dnu is automatically chosen by `pySYD`.                                  |
+-------------------------------------------------+---------------------------------------------------------+
|:bash:`pysyd run --star 9512063 --numax 843`     |:bash:`pysyd run --star 9512063 --numax 843 --dnu 49.54` |
+-------------------------------------------------+---------------------------------------------------------+
| .. figure:: figures/advanced/9512063_before.png | .. figure:: figures/advanced/9512063_after.png          |
|    :width: 600                                  |    :width: 600                                          |
+-------------------------------------------------+---------------------------------------------------------+


``--ew: excess width``
++++++++

+----------------------------------------------------------+------------------------------------------------------------------+
| Before                                                   | After                                                            |
+==========================================================+==================================================================+
| Changed the excess width in the background corrected power spectrum used to calculate the ACF (and hence dnu).              |
+----------------------------------------------------------+------------------------------------------------------------------+
| :bash:`pysyd run --star 9542776 --numax 900 --dnu 39.62` | :bash:`pysyd run --star 9542776 --numax 900 --dnu 39.62 --ew 1.5`|
+----------------------------------------------------------+------------------------------------------------------------------+
| .. figure:: figures/advanced/9542776_before.png          | .. figure:: figures/advanced/9542776_after.png                   |
|    :width: 600                                           |    :width: 600                                                   |
+----------------------------------------------------------+------------------------------------------------------------------+


``--ie: smooth echelle``
++++++++

+----------------------------------------------------------+------------------------------------------------------------------+
| Before                                                   | After                                                            |
+==========================================================+==================================================================+
| Smooth echelle diagram by turning on the interpolation, in order to distinguish the modes for low SNR cases.                |
+----------------------------------------------------------+------------------------------------------------------------------+
| :bash:`pysyd run 3112889 --numax 871.52 --dnu 53.2`      | :bash:`pysyd run --star 3112889 --numax 871.52 --dnu 53.2 --ie`  |
+----------------------------------------------------------+------------------------------------------------------------------+
| .. figure:: figures/advanced/3112889_before.png          | .. figure:: figures/advanced/3112889_after.png                   |
|    :width: 600                                           |    :width: 600                                                   |
+----------------------------------------------------------+------------------------------------------------------------------+


``--kc: Kepler correction``
++++++++

+-------------------------------------------------+-------------------------------------------------------+
| Before                                          | After                                                 |
+=================================================+=======================================================+
| Remove *Kepler* artefacts from the power spectrum for an accurate numax estimate.                       |
+-------------------------------------------------+-------------------------------------------------------+
| :bash:`pysyd run --star 8045442 --numax 550`    | :bash:`pysyd run --star 8045442 --numax 550 --kc`     |
+-------------------------------------------------+-------------------------------------------------------+
| .. figure:: figures/advanced/8045442_before.png | .. figure:: figures/advanced/8045442_after.png        |
|    :width: 600                                  |    :width: 600                                        |
+-------------------------------------------------+-------------------------------------------------------+


``--lp: lower frequency (zoomed PS)``
++++++++

+--------------------------------------------------------------------+-------------------------------------------------------------------------------+
| Before                                                             | After                                                                         |
+====================================================================+===============================================================================+
| Set the lower frequency limit in zoomed in power spectrum; useful when an artefact is present close to the excess and cannot be removed otherwise. |
+--------------------------------------------------------------------+-------------------------------------------------------------------------------+
| :bash:`pysyd run --star 10731424 --numax 750 --dnu 42`             | :bash:`pysyd run --star 10731424 --numax 750 --dnu 42 --lp 480`               |
+--------------------------------------------------------------------+-------------------------------------------------------------------------------+
| .. figure:: figures/advanced/10731424_before.png                   | .. figure:: figures/advanced/10731424_after.png                               |
|    :width: 600                                                     |    :width: 600                                                                |
+--------------------------------------------------------------------+-------------------------------------------------------------------------------+


``--npeaks: number of peaks``
++++++++

+--------------------------------------------------------------------+-------------------------------------------------------------------------------+
| Before                                                             | After                                                                         |
+====================================================================+===============================================================================+
| Change the number of peaks chosen in ACF; useful in low SNR cases where the spectrum is noisy and ACF has many peaks close to the expected dnu.    |
+--------------------------------------------------------------------+-------------------------------------------------------------------------------+
| :bash:`pysyd run --star 9455860 --numax 1487 --ew 1.2  --dnu 70.9` | :bash:`pysyd run --star 9455860 --numax 1487 --ew 1.2 --npeaks 20 --dnu 70.9` |
+--------------------------------------------------------------------+-------------------------------------------------------------------------------+
| .. figure:: figures/advanced/9455860_before.png                    | .. figure:: figures/advanced/9455860_after.png                                |
|    :width: 600                                                     |    :width: 600                                                                |
+--------------------------------------------------------------------+-------------------------------------------------------------------------------+


``--numax``
++++++++

+--------------------------------------------------+-------------------------------------------------------+
| Before                                           | After                                                 |
+==================================================+=======================================================+
| Set the numax value if pySYD chooses the wrong excess in the power spectrum.                             |
+--------------------------------------------------+-------------------------------------------------------+
| :bash:`pysyd run --star 5791521`                 | :bash:`pysyd run --star 5791521 --numax 670`          |
+--------------------------------------------------+-------------------------------------------------------+
| .. figure:: figures/advanced/5791521_before.png  | .. figure:: figures/advanced/5791521_after.png        |
|    :width: 600                                   |    :width: 600                                        |
+--------------------------------------------------+-------------------------------------------------------+


``--ux: upper frequency (PS)``
++++++++

+--------------------------------------------------+-------------------------------------------------------+
| Before                                           | After                                                 |
+==================================================+=======================================================+
| Set the upper frequency limit in power spectrum; useful when `pySYD` finds the wrong excess.             |
+--------------------------------------------------+-------------------------------------------------------+
| :bash:`pysyd run --star 11769801`                | :bash:`pysyd run --star 11769801 -ux 3500`            |
+--------------------------------------------------+-------------------------------------------------------+
| .. figure:: figures/advanced/11769801_before.png | .. figure:: figures/advanced/11769801_after.png       |
|    :width: 600                                   |    :width: 600                                        |
+--------------------------------------------------+-------------------------------------------------------+

